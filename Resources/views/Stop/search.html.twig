{% extends "TisseoBoaBundle::container.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets 'components/jquery-ui/themes/smoothness/jquery-ui.css'
                   filter='cssrewrite' output='css/stop_boa.css' %}
        <link rel="stylesheet" href="{{ asset_url }}?{{ assets_version }}" />
    {% endstylesheets %}
{% endblock %}

{% block main_content %}
<div class="row">
    <div class="col-md-2">
        <h1>{{ title|trans({}, 'default') }}</h1>
    </div>

{% if (is_granted('BUSINESS_MANAGE_STOPS')) %}
    <div class="col-md-10">
        <a href="{{ path('tisseo_boa_stop_new') }}"  data-toggle="modal" data-target="#base-modal" class="btn btn-success" id="new_stop">
            <span class="glyphicon glyphicon-plus"></span> {{'stop.create'|trans({}, 'default')}}
        </a>
    </div>

{% endif %}
</div>
<div class="row m-t-row">
    <div class="col-md-6">
        <input type="hidden" id="stop_id">
        <input type="text" id="stop_search"  class="form-control" data-url="{{ path('tisseo_boa_json_stop') }}">
    </div>
    <div class="col-md-6">
        <a href="{{ path('tisseo_boa_stop_edit') }}" class="btn btn-success" id="stop_edit">
            <span class="glyphicon glyphicon-check"></span> {{'stop.validate'|trans({}, 'default')}}
        </a>
    </div>
</div>
{% endblock %}

{% block javascripts %}
   <script>
        require(['boa/stop/utils'], function(utils) {
            utils.init_autocomplete("#stop_search", "#stop_id");

			$( "#stop_edit" ).click(function() {
				var stop_id = $("#stop_id").val();
				if(stop_id == '') {
					alert( "{{'stop.no_stop_selected'|trans({}, 'default')|e('js')}}" );
					return false;
				}
				$(this).attr("href", $(this).attr("href") + "/" + stop_id);
			});
			
		 });
    </script>
{% endblock %}
